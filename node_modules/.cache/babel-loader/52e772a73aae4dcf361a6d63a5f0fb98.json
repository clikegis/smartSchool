{"remainingRequest":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\src\\components\\SpatialAnalysis\\SpatialAnalysisDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\src\\components\\SpatialAnalysis\\SpatialAnalysisDialog.vue","mtime":1656476912657},{"path":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\babel.config.js","mtime":1656398191838},{"path":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KY29uc3QgQ2VzaXVtID0gcmVxdWlyZSgiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvQ2VzaXVtLmpzIik7CgppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgU3BhdGlhbEFuYWx5c2lzIGZyb20gJy4uLy4uL3V0aWxzL3NwYXRpYWxBbmFseXNpcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU3BhdGlhbEFuYWx5c2lzRGlhbG9nIiwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJ1ZmZlcjogewogICAgICAgIHJhZGl1czogMTAsCiAgICAgICAgb3B0aW9uOiAwCiAgICAgIH0sCiAgICAgIHZpc2liaWxpdHk6IHsKICAgICAgICBlbnRpdHk6IG51bGwsCiAgICAgICAgZmxhZzogZmFsc2UsCiAgICAgICAgZmllbGQ6IG51bGwsCiAgICAgICAgZm9ybTogewogICAgICAgICAgdmlld0hlYWRpbmc6IDAsCiAgICAgICAgICB2aWV3RGlzdGFuY2U6IDAsCiAgICAgICAgICBob3Jpem9udGFsVmlld0FuZ2xlOiAwLAogICAgICAgICAgdmVydGljYWxWaWV3QW5nbGU6IDAKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxpbWl0SGVpZ2h0OiB7CiAgICAgICAgZW50aXR5OiBudWxsLAogICAgICAgIGZsYWc6IGZhbHNlLAogICAgICAgIGxpbWl0OiA2MAogICAgICB9LAogICAgICBzaWdodDogewogICAgICAgIHNpbmdsZUxpbmU6IG51bGwsCiAgICAgICAgY2lyY2xlOiBudWxsLAogICAgICAgIG9wdGlvbjogMAogICAgICB9LAogICAgICBkaWdUZXJyYWluOiB7CiAgICAgICAgZW50aXR5OiBudWxsLAogICAgICAgIGZsYWc6IGZhbHNlLAogICAgICAgIGRlcHRoOiAyMDAKICAgICAgfQogICAgfTsKICB9LAoKICB3YXRjaDogewogICAgJ3Zpc2liaWxpdHkuZm9ybSc6IHsKICAgICAgZGVlcDogdHJ1ZSwKCiAgICAgIGhhbmRsZXIoKSB7CiAgICAgICAgaWYgKHRoaXMudmlzaWJpbGl0eS5maWVsZCAhPT0gbnVsbCkgewogICAgICAgICAgdGhpcy52aXNpYmlsaXR5LmZpZWxkLnVwZGF0ZVN0eWxlKHRoaXMudmlzaWJpbGl0eS5mb3JtKTsKICAgICAgICB9CiAgICAgIH0KCiAgICB9LAogICAgJ2xpbWl0SGVpZ2h0LmxpbWl0JzogewogICAgICBkZWVwOiB0cnVlLAoKICAgICAgaGFuZGxlcigpIHsKICAgICAgICBpZiAodGhpcy5saW1pdEhlaWdodC5lbnRpdHkgIT09IG51bGwpIHsKICAgICAgICAgIHRoaXMubGltaXRIZWlnaHQuZW50aXR5LnNldEhlaWdodChOdW1iZXIodGhpcy5saW1pdEhlaWdodC5saW1pdCkpOwogICAgICAgIH0KICAgICAgfQoKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7IC4uLm1hcFN0YXRlKFsndmlld2VyJywgJ2hhbmRsZXInLCAnb3B0aW9ucyddKQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0UG9zaXRpb25zKG1vdmVtZW50KSB7CiAgICAgIGxldCBDYXJ0ZXNpYW4zID0gdGhpcy52aWV3ZXIuY2FtZXJhLnBpY2tFbGxpcHNvaWQobW92ZW1lbnQuZW5kUG9zaXRpb24gfHwgbW92ZW1lbnQucG9zaXRpb24sIENlc2l1bS5FbGxpcHNvaWQuV0dTODQpOwogICAgICBpZiAoQ2FydGVzaWFuMyA9PSB1bmRlZmluZWQpIHJldHVybjsKICAgICAgdGhpcy54ID0gTnVtYmVyKENhcnRlc2lhbjMueCkudG9GaXhlZCgyKTsKICAgICAgdGhpcy55ID0gTnVtYmVyKENhcnRlc2lhbjMueSkudG9GaXhlZCgyKTsKICAgICAgdGhpcy56ID0gTnVtYmVyKENhcnRlc2lhbjMueikudG9GaXhlZCgyKTsKICAgICAgbGV0IENhcnRvZ3JhcGhpYyA9IENlc2l1bS5DYXJ0b2dyYXBoaWMuZnJvbUNhcnRlc2lhbihDYXJ0ZXNpYW4zKTsKICAgICAgdGhpcy5sb24gPSBDZXNpdW0uTWF0aC50b0RlZ3JlZXMoQ2FydG9ncmFwaGljLmxvbmdpdHVkZSk7CiAgICAgIHRoaXMubGF0ID0gQ2VzaXVtLk1hdGgudG9EZWdyZWVzKENhcnRvZ3JhcGhpYy5sYXRpdHVkZSk7CiAgICAgIHRoaXMuaGVpZ2h0ID0gQ2FydG9ncmFwaGljLmhlaWdodDsKICAgICAgcmV0dXJuIFtDZXNpdW0uTWF0aC50b0RlZ3JlZXMoQ2FydG9ncmFwaGljLmxvbmdpdHVkZSksIENlc2l1bS5NYXRoLnRvRGVncmVlcyhDYXJ0b2dyYXBoaWMubGF0aXR1ZGUpXTsKICAgIH0sCgogICAgYWRkQnVmZmVyKGJ1ZmZlcikgewogICAgICB0aGlzLnZpZXdlci5lbnRpdGllcy5hZGQoewogICAgICAgIHBvbHlnb246IHsKICAgICAgICAgIGhpZXJhcmNoeTogbmV3IENlc2l1bS5Qb2x5Z29uSGllcmFyY2h5KGJ1ZmZlciksCiAgICAgICAgICBtYXRlcmlhbDogQ2VzaXVtLkNvbG9yLlJFRC53aXRoQWxwaGEoMC42KSwKICAgICAgICAgIGNsYXNzaWZpY2F0aW9uVHlwZTogQ2VzaXVtLkNsYXNzaWZpY2F0aW9uVHlwZS5CT1RICiAgICAgICAgfSwKICAgICAgICBwb2x5bGluZTogewogICAgICAgICAgcG9zaXRpb25zOiBidWZmZXIsCiAgICAgICAgICB3aWR0aDogMiwKICAgICAgICAgIG1hdGVyaWFsOiBDZXNpdW0uQ29sb3IuUkVELndpdGhBbHBoYSgwLjQpCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgc2V0QnVmZmVyKCkgewogICAgICBpZiAodGhpcy5idWZmZXIub3B0aW9uID09PSAwKSB7CiAgICAgICAgdGhpcy52aWV3ZXIuZW50aXRpZXMucmVtb3ZlQWxsKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmJ1ZmZlci5vcHRpb24gPT09IDEpIHsKICAgICAgICB0aGlzLmhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oY2xpY2tFdmVudCA9PiB7CiAgICAgICAgICB0aGlzLmhhbmRsZXIucmVtb3ZlSW5wdXRBY3Rpb24oQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLkxFRlRfQ0xJQ0spOwogICAgICAgICAgbGV0IHBvaW50ID0gdGhpcy5nZXRQb3NpdGlvbnMoY2xpY2tFdmVudCk7CiAgICAgICAgICB0aGlzLnZpZXdlci5lbnRpdGllcy5hZGQoewogICAgICAgICAgICBwb3NpdGlvbjogQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXMocG9pbnRbMF0sIHBvaW50WzFdLCAwKSwKICAgICAgICAgICAgcG9pbnQ6IHsKICAgICAgICAgICAgICBwaXhlbFNpemU6IDMsCiAgICAgICAgICAgICAgY29sb3I6IENlc2l1bS5Db2xvci5ZRUxMT1csCiAgICAgICAgICAgICAgb3V0bGluZVdpZHRoOiAzLAogICAgICAgICAgICAgIG91dGxpbmVDb2xvcjogQ2VzaXVtLkNvbG9yLllFTExPVy53aXRoQWxwaGEoMC40KQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuYWRkQnVmZmVyKFNwYXRpYWxBbmFseXNpcy5CdWZmZXJBbmFseXNpcy5wb2ludEJ1ZmZlcihwb2ludCwgdGhpcy5idWZmZXIucmFkaXVzKSk7CiAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLkxFRlRfQ0xJQ0spOwogICAgICB9CgogICAgICBpZiAodGhpcy5idWZmZXIub3B0aW9uID09PSAyKSB7CiAgICAgICAgbGV0IHBvaW50cyA9IFtdOwogICAgICAgIHRoaXMuaGFuZGxlci5zZXRJbnB1dEFjdGlvbihjbGlja0V2ZW50ID0+IHsKICAgICAgICAgIHBvaW50cy5wdXNoKHRoaXMuZ2V0UG9zaXRpb25zKGNsaWNrRXZlbnQpKTsKCiAgICAgICAgICBpZiAocG9pbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgbGV0IHBvc2l0aW9ucyA9IFsuLi5wb2ludHNbcG9pbnRzLmxlbmd0aCAtIDJdLCAuLi5wb2ludHNbcG9pbnRzLmxlbmd0aCAtIDFdXTsKICAgICAgICAgICAgdGhpcy52aWV3ZXIuZW50aXRpZXMuYWRkKHsKICAgICAgICAgICAgICBwb2x5bGluZTogewogICAgICAgICAgICAgICAgcG9zaXRpb25zOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KHBvc2l0aW9ucyksCiAgICAgICAgICAgICAgICB3aWR0aDogMiwKICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBDZXNpdW0uQ29sb3IuWUVMTE9XCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9DTElDSyk7CiAgICAgICAgdGhpcy5oYW5kbGVyLnNldElucHV0QWN0aW9uKGNsaWNrRXZlbnQgPT4gewogICAgICAgICAgdGhpcy5oYW5kbGVyLnJlbW92ZUlucHV0QWN0aW9uKENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0NMSUNLKTsKICAgICAgICAgIHRoaXMuaGFuZGxlci5yZW1vdmVJbnB1dEFjdGlvbihDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuUklHSFRfQ0xJQ0spOwogICAgICAgICAgdGhpcy5hZGRCdWZmZXIoU3BhdGlhbEFuYWx5c2lzLkJ1ZmZlckFuYWx5c2lzLnBvbHlsaW5lQnVmZmVyKHBvaW50cywgdGhpcy5idWZmZXIucmFkaXVzKSk7CiAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLlJJR0hUX0NMSUNLKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYnVmZmVyLm9wdGlvbiA9PT0gMykgewogICAgICAgIGxldCBwb2ludHMgPSBbXTsKICAgICAgICBsZXQgcG9zaXRpb25zID0gW107CiAgICAgICAgdGhpcy5oYW5kbGVyLnNldElucHV0QWN0aW9uKGNsaWNrRXZlbnQgPT4gewogICAgICAgICAgcG9pbnRzLnB1c2godGhpcy5nZXRQb3NpdGlvbnMoY2xpY2tFdmVudCkpOwogICAgICAgICAgcG9zaXRpb25zID0gWy4uLnBvc2l0aW9ucywgLi4udGhpcy5nZXRQb3NpdGlvbnMoY2xpY2tFdmVudCldOwoKICAgICAgICAgIGlmIChwb2ludHMubGVuZ3RoID4gMSAmJiBwb2ludHMubGVuZ3RoIDwgMykgewogICAgICAgICAgICB0aGlzLnZpZXdlci5lbnRpdGllcy5hZGQoewogICAgICAgICAgICAgIGlkOiAnYXJlYV9saW5lJywKICAgICAgICAgICAgICBwb2x5bGluZTogewogICAgICAgICAgICAgICAgcG9zaXRpb25zOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KHBvc2l0aW9ucyksCiAgICAgICAgICAgICAgICB3aWR0aDogMiwKICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBDZXNpdW0uQ29sb3IuWUVMTE9XCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAocG9pbnRzLmxlbmd0aCA+PSAzKSB7CiAgICAgICAgICAgIGxldCBhcmVhcyA9IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoWy4uLnBvc2l0aW9ucywgcG9zaXRpb25zWzBdLCBwb3NpdGlvbnNbMV1dKTsKICAgICAgICAgICAgdGhpcy52aWV3ZXIuZW50aXRpZXMucmVtb3ZlQnlJZCgnYXJlYScpOwogICAgICAgICAgICB0aGlzLnZpZXdlci5lbnRpdGllcy5hZGQoewogICAgICAgICAgICAgIGlkOiAnYXJlYScsCiAgICAgICAgICAgICAgcG9seWdvbjogewogICAgICAgICAgICAgICAgaGllcmFyY2h5OiBuZXcgQ2VzaXVtLlBvbHlnb25IaWVyYXJjaHkoYXJlYXMpLAogICAgICAgICAgICAgICAgbWF0ZXJpYWw6IENlc2l1bS5Db2xvci5ZRUxMT1cud2l0aEFscGhhKDAuNiksCiAgICAgICAgICAgICAgICBjbGFzc2lmaWNhdGlvblR5cGU6IENlc2l1bS5DbGFzc2lmaWNhdGlvblR5cGUuQk9USAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgcG9seWxpbmU6IHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uczogYXJlYXMsCiAgICAgICAgICAgICAgICB3aWR0aDogMiwKICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBDZXNpdW0uQ29sb3IuWUVMTE9XLndpdGhBbHBoYSgwLjQpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy52aWV3ZXIuZW50aXRpZXMucmVtb3ZlQnlJZCgnYXJlYV9saW5lJyk7CiAgICAgICAgICB9CiAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLkxFRlRfQ0xJQ0spOwogICAgICAgIHRoaXMuaGFuZGxlci5zZXRJbnB1dEFjdGlvbihjbGlja0V2ZW50ID0+IHsKICAgICAgICAgIHRoaXMuaGFuZGxlci5yZW1vdmVJbnB1dEFjdGlvbihDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9DTElDSyk7CiAgICAgICAgICB0aGlzLmhhbmRsZXIucmVtb3ZlSW5wdXRBY3Rpb24oQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLlJJR0hUX0NMSUNLKTsKCiAgICAgICAgICBpZiAocG9pbnRzLmxlbmd0aCA+PSAzKSB7CiAgICAgICAgICAgIGxldCBhcmVhcyA9IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoWy4uLnBvc2l0aW9ucywgcG9zaXRpb25zWzBdLCBwb3NpdGlvbnNbMV1dKTsKICAgICAgICAgICAgdGhpcy52aWV3ZXIuZW50aXRpZXMucmVtb3ZlQnlJZCgnYXJlYScpOwogICAgICAgICAgICB0aGlzLnZpZXdlci5lbnRpdGllcy5hZGQoewogICAgICAgICAgICAgIHBvbHlnb246IHsKICAgICAgICAgICAgICAgIGhpZXJhcmNoeTogbmV3IENlc2l1bS5Qb2x5Z29uSGllcmFyY2h5KGFyZWFzKSwKICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBDZXNpdW0uQ29sb3IuWUVMTE9XLndpdGhBbHBoYSgwLjYpLAogICAgICAgICAgICAgICAgY2xhc3NpZmljYXRpb25UeXBlOiBDZXNpdW0uQ2xhc3NpZmljYXRpb25UeXBlLkJPVEgKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHBvbHlsaW5lOiB7CiAgICAgICAgICAgICAgICBwb3NpdGlvbnM6IGFyZWFzLAogICAgICAgICAgICAgICAgd2lkdGg6IDIsCiAgICAgICAgICAgICAgICBtYXRlcmlhbDogQ2VzaXVtLkNvbG9yLllFTExPVy53aXRoQWxwaGEoMC40KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGxldCBhcmVhX3BvaW50cyA9IFsuLi5wb2ludHMsIHBvaW50c1swXV07CiAgICAgICAgICAgIHRoaXMuYWRkQnVmZmVyKFNwYXRpYWxBbmFseXNpcy5CdWZmZXJBbmFseXNpcy5wb2x5Z29uQnVmZmVyKGFyZWFfcG9pbnRzLCB0aGlzLmJ1ZmZlci5yYWRpdXMpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMudmlld2VyLmVudGl0aWVzLnJlbW92ZUJ5SWQoJ2FyZWFfbGluZScpOwogICAgICAgICAgfQogICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5SSUdIVF9DTElDSyk7CiAgICAgIH0KICAgIH0sCgogICAgc2V0VmlzaWJpbGl0eSgpIHsKICAgICAgaWYgKHRoaXMudmlzaWJpbGl0eS5mbGFnKSB7CiAgICAgICAgdGhpcy52aXNpYmlsaXR5LmVudGl0eSA9IG5ldyBTcGF0aWFsQW5hbHlzaXMuVmlzaWJpbGl0eUFuYWx5c2lzKHRoaXMudmlld2VyKTsKICAgICAgICB0aGlzLnZpc2liaWxpdHkuZW50aXR5LkRyYXdFbmRFdmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50ID0+IHsKICAgICAgICAgIHRoaXMudmlzaWJpbGl0eS5maWVsZCA9IGV2ZW50OwogICAgICAgICAgdGhpcy52aXNpYmlsaXR5LmZvcm0gPSBldmVudC5nZXRTdHlsZSgpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMudmlzaWJpbGl0eS5lbnRpdHkuYWN0aXZhdGUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy52aXNpYmlsaXR5LmZpZWxkICE9PSBudWxsKSB7CiAgICAgICAgICB0aGlzLnZpc2liaWxpdHkuZmllbGQucmVtb3ZlKCk7CiAgICAgICAgICB0aGlzLnZpc2liaWxpdHkuZmllbGQgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgdGhpcy52aXNpYmlsaXR5LmVudGl0eSA9IG51bGw7CiAgICAgIH0KICAgIH0sCgogICAgc2V0TGltaXRIZWlnaHQoKSB7CiAgICAgIGlmICh0aGlzLmxpbWl0SGVpZ2h0LmZsYWcpIHsKICAgICAgICBsZXQgZGVncmVlc0FycmF5ID0gWzExNC42MDg5ODIwODA5NjczMiwgMzAuNDY0Njk4NDIzNDM2MjcyLCAxMTQuNjEyOTgyMDgwOTY3MzIsIDMwLjQ2NDY5ODQyMzQzNjI3MiwgMTE0LjYxMjk4MjA4MDk2NzMyLCAzMC40NjA2OTg0MjM0MzYyNzIsIDExNC42MDg5ODIwODA5NjczMiwgMzAuNDYwNjk4NDIzNDM2MjcyXTsKICAgICAgICB0aGlzLmxpbWl0SGVpZ2h0LmVudGl0eSA9IG5ldyBTcGF0aWFsQW5hbHlzaXMuTGltaXRIZWlnaHRBbmFseXNpcyh0aGlzLnZpZXdlciwgZGVncmVlc0FycmF5LCB0aGlzLmxpbWl0SGVpZ2h0LmxpbWl0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmxpbWl0SGVpZ2h0LmVudGl0eS5yZW1vdmUoKTsKICAgICAgICB0aGlzLmxpbWl0SGVpZ2h0LmVudGl0eSA9IG51bGw7CiAgICAgIH0KICAgIH0sCgogICAgc2V0U2lnaHQoKSB7CiAgICAgIGlmICh0aGlzLnNpZ2h0Lm9wdGlvbiA9PT0gMCkgewogICAgICAgIGlmICh0aGlzLnNpZ2h0LnNpbmdsZUxpbmUgIT09IG51bGwpIHsKICAgICAgICAgIHRoaXMuc2lnaHQuc2luZ2xlTGluZS5kZWFjdGl2YXRlKCk7CiAgICAgICAgICB0aGlzLnNpZ2h0LnNpbmdsZUxpbmUuY2xlYXIoKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnNpZ2h0LkNpcmNsZSAhPT0gbnVsbCkgewogICAgICAgICAgdGhpcy5zaWdodC5DaXJjbGUuZGVhY3RpdmF0ZSgpOwogICAgICAgICAgdGhpcy5zaWdodC5DaXJjbGUuY2xlYXIoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMudmlld2VyLmVudGl0aWVzLnJlbW92ZUFsbCgpOwogICAgICAgIHRoaXMudmlld2VyLnNjZW5lLnBvc3RQcm9jZXNzU3RhZ2VzLnJlbW92ZUFsbCgpOwogICAgICB9CgogICAgICBpZiAodGhpcy5zaWdodC5vcHRpb24gPT09IDEpIHsKICAgICAgICB0aGlzLnNpZ2h0LnNpbmdsZUxpbmUgPSBuZXcgU3BhdGlhbEFuYWx5c2lzLlNpZ2h0TGluZSh0aGlzLnZpZXdlcik7CiAgICAgICAgdGhpcy5zaWdodC5zaW5nbGVMaW5lLmFjdGl2YXRlKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNpZ2h0Lm9wdGlvbiA9PT0gMikgewogICAgICAgIHRoaXMuc2lnaHQuQ2lyY2xlID0gbmV3IFNwYXRpYWxBbmFseXNpcy5DaXJjbGUodGhpcy52aWV3ZXIpOwogICAgICAgIHRoaXMuc2lnaHQuQ2lyY2xlLmFjdGl2YXRlKCk7CiAgICAgIH0KICAgIH0sCgogICAgc2V0RGlnVGVycmFpbigpIHsKICAgICAgaWYgKHRoaXMuZGlnVGVycmFpbi5mbGFnKSB7CiAgICAgICAgdGhpcy5kaWdUZXJyYWluLmVudGl0eSA9IG5ldyBTcGF0aWFsQW5hbHlzaXMuRXhjYXZhdGUodGhpcy52aWV3ZXIpOwogICAgICAgIHRoaXMuZGlnVGVycmFpbi5lbnRpdHkuY2xlYXIoKTsKICAgICAgICBsZXQgZW50aXR5RHJhdyA9IG5ldyBTcGF0aWFsQW5hbHlzaXMuRW50aXR5RHJhdyh0aGlzLnZpZXdlcik7CiAgICAgICAgZW50aXR5RHJhdy5EcmF3RW5kRXZlbnQuYWRkRXZlbnRMaXN0ZW5lcigocmVzdWx0LCBwb3NpdGlvbnMpID0+IHsKICAgICAgICAgIHJlc3VsdC5yZW1vdmUoKTsKICAgICAgICAgIHRoaXMuZGlnVGVycmFpbi5lbnRpdHkuYWRkKHBvc2l0aW9ucywgewogICAgICAgICAgICBleGNhdmF0ZURlcHRoOiB0aGlzLmRpZ1RlcnJhaW4uZGVwdGgsCiAgICAgICAgICAgIGJvdHRvbUltYWdlOiAnaW1nL2V4Y2F2YXRlX2JvdHRvbV9taW4uanBnJywKICAgICAgICAgICAgc2lkZUltYWdlOiAnaW1nL2V4Y2F2YXRlX2t1YW5ncXUuanBnJwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgZW50aXR5RHJhdy5hY3RpdmF0ZSgnUG9seWdvbicpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudmlld2VyLmVudGl0aWVzLnJlbW92ZUFsbCgpOwogICAgICB9CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;;AAEA;AACA;AACA;EACAA,6BADA;;EAEAC;IACA;MACAC;QACAC,UADA;QAEAC;MAFA,CADA;MAKAC;QACAC,YADA;QAEAC,WAFA;QAGAC,WAHA;QAIAC;UACAC,cADA;UAEAC,eAFA;UAGAC,sBAHA;UAIAC;QAJA;MAJA,CALA;MAgBAC;QACAR,YADA;QAEAC,WAFA;QAGAQ;MAHA,CAhBA;MAqBAC;QACAC,gBADA;QAEAC,YAFA;QAGAd;MAHA,CArBA;MA0BAe;QACAb,YADA;QAEAC,WAFA;QAGAa;MAHA;IA1BA;EAkCA,CArCA;;EAsCAC;IACA;MACAC,UADA;;MAEAC;QACA,oCACA;UACA;QACA;MACA;;IAPA,CADA;IAUA;MACAD,UADA;;MAEAC;QACA,sCACA;UACA;QACA;MACA;;IAPA;EAVA,CAtCA;EA0DAC,YACA;EADA,CA1DA;EA6DAC;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CAZA;;IAaAC;MACA;QACAC;UACAC,8CADA;UAEAC,yCAFA;UAGAC;QAHA,CADA;QAMAC;UACAC,iBADA;UAEAC,QAFA;UAGAJ;QAHA;MANA;IAYA,CA1BA;;IA2BAK;MACA;QACA;MACA;;MACA;QACA;UACA;UACA;UACA;YACAC,8DADA;YAEAC;cACAC,YADA;cAEAC,0BAFA;cAGAC,eAHA;cAIAC;YAJA;UAFA;UASA;QACA,CAbA,EAaAC,sCAbA;MAcA;;MACA;QACA;QACA;UACAC;;UACA;YACA;YACA;cACAX;gBACAC,wDADA;gBAEAC,QAFA;gBAGAJ;cAHA;YADA;UAOA;QACA,CAZA,EAYAY,sCAZA;QAaA;UACA;UACA;UACA;QACA,CAJA,EAIAA,uCAJA;MAKA;;MACA;QACA;QACA;QACA;UAEAC;UACAV;;UACA;YACA;cACAW,eADA;cAEAZ;gBACAC,wDADA;gBAEAC,QAFA;gBAGAJ;cAHA;YAFA;UAQA,CATA,MASA;YACA;YACA;YACA;cACAc,UADA;cAEAhB;gBACAC,6CADA;gBAEAC,4CAFA;gBAGAC;cAHA,CAFA;cAOAC;gBACAC,gBADA;gBAEAC,QAFA;gBAGAJ;cAHA;YAPA;YAaA;UACA;QACA,CA/BA,EA+BAY,sCA/BA;QAgCA;UACA;UACA;;UACA;YACA;YACA;YACA;cACAd;gBACAC,6CADA;gBAEAC,4CAFA;gBAGAC;cAHA,CADA;cAMAC;gBACAC,gBADA;gBAEAC,QAFA;gBAGAJ;cAHA;YANA;YAYA;YACA;UACA,CAjBA,MAiBA;YACA;UACA;QACA,CAvBA,EAuBAY,uCAvBA;MAwBA;IACA,CAhIA;;IAiIAG;MACA,0BACA;QACA;QACA;UACA;UACA;QACA,CAHA;QAIA;MACA,CARA,MAUA;QACA,oCACA;UACA;UACA;QACA;;QACA;MACA;IACA,CApJA;;IAqJAC;MACA,2BACA;QACA,oBACA,kBADA,EACA,kBADA,EAEA,kBAFA,EAEA,kBAFA,EAGA,kBAHA,EAGA,kBAHA,EAIA,kBAJA,EAIA,kBAJA;QAMA;MACA,CATA,MAWA;QACA;QACA;MACA;IACA,CArKA;;IAsKAC;MACA;QACA,oCACA;UACA;UACA;QACA;;QACA,gCACA;UACA;UACA;QACA;;QACA;QACA;MACA;;MACA,6BACA;QACA;QACA;MACA;;MACA,6BACA;QACA;QACA;MACA;IACA,CA/LA;;IAgMAC;MACA,0BACA;QACA;QACA;QACA;QACAC;UACAC;UACA;YACAC,oCADA;YAEAC,0CAFA;YAGAC;UAHA;QAKA,CAPA;QAQAJ;MACA,CAdA,MAgBA;QACA;MACA;IACA;;EApNA;AA7DA","names":["name","data","buffer","radius","option","visibility","entity","flag","field","form","viewHeading","viewDistance","horizontalViewAngle","verticalViewAngle","limitHeight","limit","sight","singleLine","circle","digTerrain","depth","watch","deep","handler","computed","methods","getPositions","addBuffer","polygon","hierarchy","material","classificationType","polyline","positions","width","setBuffer","position","point","pixelSize","color","outlineWidth","outlineColor","Cesium","points","id","setVisibility","setLimitHeight","setSight","setDigTerrain","entityDraw","result","excavateDepth","bottomImage","sideImage"],"sourceRoot":"src/components/SpatialAnalysis","sources":["SpatialAnalysisDialog.vue"],"sourcesContent":["<template>\r\n    <div class=\"spatialAnalysisDialog\">\r\n        <v-card class=\"block\" v-show=\"options.buffer\">\r\n            <div class=\"row\">\r\n                <v-text-field\r\n                        label=\"设置缓冲区半径（m）\"\r\n                        v-model=\"buffer.radius\"\r\n                        hide-details=\"auto\"\r\n                        class=\"title\"\r\n                >\r\n\r\n                </v-text-field>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"buffer.option=1;setBuffer()\"\r\n                >\r\n                    点\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"buffer.option=2;setBuffer()\"\r\n                >\r\n                    线\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"buffer.option=3;setBuffer()\"\r\n                >\r\n                    面\r\n                </v-btn>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"buffer.option=0;setBuffer()\"\r\n                >\r\n                    清空\r\n                </v-btn>\r\n            </div>\r\n        </v-card>\r\n        <v-card class=\"block\" v-show=\"options.visibility\">\r\n            <div class=\"row\">\r\n                <span>视域方向</span>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-slider class=\"title\" v-model=\"visibility.form.viewHeading\" :max=\"360\" :min=\"0\"></v-slider>\r\n            </div>\r\n            <div class=\"row\">\r\n                <span>水平张角</span>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-slider class=\"title\" v-model=\"visibility.form.horizontalViewAngle\" :max=\"150\" :min=\"1\"></v-slider>\r\n            </div>\r\n            <div class=\"row\">\r\n                <span>垂直张角</span>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-slider class=\"title\" v-model=\"visibility.form.verticalViewAngle\" :max=\"150\" :min=\"1\"></v-slider>\r\n            </div>\r\n            <div class=\"row\">\r\n                <span>视域距离</span>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-slider class=\"title\" v-model=\"visibility.form.viewDistance\" :max=\"1000\" :min=\"1\"></v-slider>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"visibility.flag=true;setVisibility()\"\r\n                >\r\n                    绘制\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"visibility.flag=false;setVisibility()\"\r\n                >\r\n                    清空\r\n                </v-btn>\r\n            </div>\r\n        </v-card>\r\n        <v-card class=\"block\" v-show=\"options.limitHeight\">\r\n            <div class=\"row\">\r\n                <span>限制高度</span>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-slider class=\"title\" v-model=\"limitHeight.limit\" :max=\"120\" :min=\"1\"></v-slider>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"limitHeight.flag=true;setLimitHeight()\"\r\n                >\r\n                    绘制\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"limitHeight.flag=false;setLimitHeight()\"\r\n                >\r\n                    清空\r\n                </v-btn>\r\n            </div>\r\n        </v-card>\r\n        <v-card class=\"block\" v-show=\"options.sight\">\r\n            <div class=\"row\">\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"sight.option=1;setSight()\"\r\n                >\r\n                    线形\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"sight.option=2;setSight()\"\r\n                >\r\n                    圆形\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"sight.option=0;setSight()\"\r\n                >\r\n                    清空\r\n                </v-btn>\r\n            </div>\r\n        </v-card>\r\n        <v-card class=\"block\" v-show=\"options.digTerrain\">\r\n            <div class=\"row\">\r\n                <v-text-field\r\n                        label=\"设置填挖深度（m）\"\r\n                        v-model=\"digTerrain.depth\"\r\n                        hide-details=\"auto\"\r\n                        class=\"title\"\r\n                >\r\n\r\n                </v-text-field>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"digTerrain.flag=true;setDigTerrain()\"\r\n                >\r\n                    绘制\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"digTerrain.flag=false;setDigTerrain()\"\r\n                >\r\n                    清空\r\n                </v-btn>\r\n            </div>\r\n        </v-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    const Cesium = require(\"../../../node_modules/cesium/Source/Cesium.js\");\r\n\r\n    import { mapState } from 'vuex'\r\n    import SpatialAnalysis from '../../utils/spatialAnalysis'\r\n    export default {\r\n        name: \"SpatialAnalysisDialog\",\r\n        data() {\r\n            return {\r\n                buffer: {\r\n                    radius: 10,\r\n                    option: 0\r\n                },\r\n                visibility: {\r\n                    entity: null,\r\n                    flag: false,\r\n                    field: null,\r\n                    form: {\r\n                        viewHeading: 0,\r\n                        viewDistance: 0,\r\n                        horizontalViewAngle: 0,\r\n                        verticalViewAngle: 0\r\n                    }\r\n                },\r\n                limitHeight: {\r\n                    entity: null,\r\n                    flag: false,\r\n                    limit: 60,\r\n                },\r\n                sight: {\r\n                    singleLine: null,\r\n                    circle: null,\r\n                    option: 0\r\n                },\r\n                digTerrain: {\r\n                    entity: null,\r\n                    flag: false,\r\n                    depth: 200\r\n                }\r\n\r\n\r\n            };\r\n        },\r\n        watch: {\r\n            'visibility.form': {\r\n                deep: true,\r\n                handler() {\r\n                    if (this.visibility.field !== null)\r\n                    {\r\n                        this.visibility.field.updateStyle(this.visibility.form);\r\n                    }\r\n                }\r\n            },\r\n            'limitHeight.limit': {\r\n                deep: true,\r\n                handler() {\r\n                    if(this.limitHeight.entity !== null)\r\n                    {\r\n                        this.limitHeight.entity.setHeight(Number(this.limitHeight.limit));\r\n                    }\r\n                }\r\n            },\r\n        },\r\n        computed: {\r\n            ...mapState(['viewer', 'handler', 'options'])\r\n        },\r\n        methods: {\r\n            getPositions(movement) {\r\n                let Cartesian3 = this.viewer.camera.pickEllipsoid(movement.endPosition || movement.position, Cesium.Ellipsoid.WGS84);\r\n                if (Cartesian3 == undefined) return\r\n                this.x = Number(Cartesian3.x).toFixed(2);\r\n                this.y = Number(Cartesian3.y).toFixed(2);\r\n                this.z = Number(Cartesian3.z).toFixed(2);\r\n                let Cartographic = Cesium.Cartographic.fromCartesian(Cartesian3);\r\n                this.lon = Cesium.Math.toDegrees(Cartographic.longitude);\r\n                this.lat = Cesium.Math.toDegrees(Cartographic.latitude);\r\n                this.height = Cartographic.height;\r\n                return [Cesium.Math.toDegrees(Cartographic.longitude), Cesium.Math.toDegrees(Cartographic.latitude)];\r\n            },\r\n            addBuffer(buffer) {\r\n                this.viewer.entities.add({\r\n                    polygon: {\r\n                        hierarchy: new Cesium.PolygonHierarchy(buffer),\r\n                        material: Cesium.Color.RED.withAlpha(0.6),\r\n                        classificationType: Cesium.ClassificationType.BOTH\r\n                    },\r\n                    polyline: {\r\n                        positions: buffer,\r\n                        width: 2,\r\n                        material: Cesium.Color.RED.withAlpha(0.4),\r\n                    }\r\n                });\r\n            },\r\n            setBuffer() {\r\n                if (this.buffer.option === 0) {\r\n                    this.viewer.entities.removeAll()\r\n                }\r\n                if (this.buffer.option === 1) {\r\n                    this.handler.setInputAction(clickEvent => {\r\n                        this.handler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n                        let point = this.getPositions(clickEvent);\r\n                        this.viewer.entities.add({\r\n                            position: Cesium.Cartesian3.fromDegrees(point[0], point[1], 0),\r\n                            point: {\r\n                                pixelSize: 3,\r\n                                color: Cesium.Color.YELLOW,\r\n                                outlineWidth: 3,\r\n                                outlineColor: Cesium.Color.YELLOW.withAlpha(0.4),\r\n                            }\r\n                        });\r\n                        this.addBuffer(SpatialAnalysis.BufferAnalysis.pointBuffer(point, this.buffer.radius));\r\n                    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n                }\r\n                if (this.buffer.option === 2) {\r\n                    let points = [];\r\n                    this.handler.setInputAction(clickEvent => {\r\n                        points.push(this.getPositions(clickEvent))\r\n                        if (points.length > 1) {\r\n                            let positions = [...points[points.length - 2], ...points[points.length - 1]];\r\n                            this.viewer.entities.add({\r\n                                polyline: {\r\n                                    positions: Cesium.Cartesian3.fromDegreesArray(positions),\r\n                                    width: 2,\r\n                                    material: Cesium.Color.YELLOW,\r\n                                }\r\n                            })\r\n                        }\r\n                    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n                    this.handler.setInputAction(clickEvent => {\r\n                        this.handler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n                        this.handler.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK);\r\n                        this.addBuffer(SpatialAnalysis.BufferAnalysis.polylineBuffer(points, this.buffer.radius));\r\n                    }, Cesium.ScreenSpaceEventType.RIGHT_CLICK);\r\n                }\r\n                if (this.buffer.option === 3) {\r\n                    let points = [];\r\n                    let positions = []\r\n                    this.handler.setInputAction(clickEvent => {\r\n\r\n                        points.push(this.getPositions(clickEvent))\r\n                        positions = [...positions, ...this.getPositions(clickEvent)];\r\n                        if (points.length > 1 && points.length < 3) {\r\n                            this.viewer.entities.add({\r\n                                id: 'area_line',\r\n                                polyline: {\r\n                                    positions: Cesium.Cartesian3.fromDegreesArray(positions),\r\n                                    width: 2,\r\n                                    material: Cesium.Color.YELLOW,\r\n                                }\r\n                            })\r\n                        } else if (points.length >= 3) {\r\n                            let areas = Cesium.Cartesian3.fromDegreesArray([...positions, positions[0], positions[1]]);\r\n                            this.viewer.entities.removeById('area');\r\n                            this.viewer.entities.add({\r\n                                id: 'area',\r\n                                polygon: {\r\n                                    hierarchy: new Cesium.PolygonHierarchy(areas),\r\n                                    material: Cesium.Color.YELLOW.withAlpha(0.6),\r\n                                    classificationType: Cesium.ClassificationType.BOTH\r\n                                },\r\n                                polyline: {\r\n                                    positions: areas,\r\n                                    width: 2,\r\n                                    material: Cesium.Color.YELLOW.withAlpha(0.4),\r\n                                }\r\n                            });\r\n                            this.viewer.entities.removeById('area_line');\r\n                        }\r\n                    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n                    this.handler.setInputAction(clickEvent => {\r\n                        this.handler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n                        this.handler.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK);\r\n                        if (points.length >= 3) {\r\n                            let areas = Cesium.Cartesian3.fromDegreesArray([...positions, positions[0], positions[1]]);\r\n                            this.viewer.entities.removeById('area');\r\n                            this.viewer.entities.add({\r\n                                polygon: {\r\n                                    hierarchy: new Cesium.PolygonHierarchy(areas),\r\n                                    material: Cesium.Color.YELLOW.withAlpha(0.6),\r\n                                    classificationType: Cesium.ClassificationType.BOTH\r\n                                },\r\n                                polyline: {\r\n                                    positions: areas,\r\n                                    width: 2,\r\n                                    material: Cesium.Color.YELLOW.withAlpha(0.4),\r\n                                }\r\n                            });\r\n                            let area_points = [...points, points[0]]\r\n                            this.addBuffer(SpatialAnalysis.BufferAnalysis.polygonBuffer(area_points, this.buffer.radius));\r\n                        } else {\r\n                            this.viewer.entities.removeById('area_line');\r\n                        }\r\n                    }, Cesium.ScreenSpaceEventType.RIGHT_CLICK);\r\n                }\r\n            },\r\n            setVisibility() {\r\n                if(this.visibility.flag)\r\n                {\r\n                    this.visibility.entity = new SpatialAnalysis.VisibilityAnalysis(this.viewer);\r\n                    this.visibility.entity.DrawEndEvent.addEventListener(event => {\r\n                        this.visibility.field = event;\r\n                        this.visibility.form = event.getStyle();\r\n                    });\r\n                    this.visibility.entity.activate();\r\n                }\r\n                else\r\n                {\r\n                    if(this.visibility.field !== null)\r\n                    {\r\n                        this.visibility.field.remove();\r\n                        this.visibility.field = null;\r\n                    }\r\n                    this.visibility.entity = null;\r\n                }\r\n            },\r\n            setLimitHeight() {\r\n                if(this.limitHeight.flag)\r\n                {\r\n                    let degreesArray = [\r\n                        114.60898208096732, 30.464698423436272,\r\n                        114.61298208096732, 30.464698423436272,\r\n                        114.61298208096732, 30.460698423436272,\r\n                        114.60898208096732, 30.460698423436272,\r\n                    ];\r\n                    this.limitHeight.entity = new SpatialAnalysis.LimitHeightAnalysis(this.viewer, degreesArray, this.limitHeight.limit)\r\n                }\r\n                else\r\n                {\r\n                    this.limitHeight.entity.remove();\r\n                    this.limitHeight.entity = null;\r\n                }\r\n            },\r\n            setSight() {\r\n                if (this.sight.option === 0) {\r\n                    if(this.sight.singleLine !== null)\r\n                    {\r\n                        this.sight.singleLine.deactivate();\r\n                        this.sight.singleLine.clear();\r\n                    }\r\n                    if(this.sight.Circle !== null)\r\n                    {\r\n                        this.sight.Circle.deactivate();\r\n                        this.sight.Circle.clear();\r\n                    }\r\n                    this.viewer.entities.removeAll();\r\n                    this.viewer.scene.postProcessStages.removeAll();\r\n                }\r\n                if(this.sight.option === 1)\r\n                {\r\n                    this.sight.singleLine = new SpatialAnalysis.SightLine(this.viewer);\r\n                    this.sight.singleLine.activate();\r\n                }\r\n                if(this.sight.option === 2)\r\n                {\r\n                    this.sight.Circle = new SpatialAnalysis.Circle(this.viewer);\r\n                    this.sight.Circle.activate();\r\n                }\r\n            },\r\n            setDigTerrain() {\r\n                if(this.digTerrain.flag)\r\n                {\r\n                    this.digTerrain.entity = new SpatialAnalysis.Excavate(this.viewer)\r\n                    this.digTerrain.entity.clear()\r\n                    let entityDraw = new SpatialAnalysis.EntityDraw(this.viewer);\r\n                    entityDraw.DrawEndEvent.addEventListener((result, positions) => {\r\n                        result.remove()\r\n                        this.digTerrain.entity.add(positions, {\r\n                            excavateDepth: this.digTerrain.depth,\r\n                            bottomImage: 'img/excavate_bottom_min.jpg',\r\n                            sideImage: 'img/excavate_kuangqu.jpg'\r\n                        });\r\n                    })\r\n                    entityDraw.activate('Polygon');\r\n                }\r\n                else\r\n                {\r\n                    this.viewer.entities.removeAll();\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .spatialAnalysisDialog {\r\n        position: absolute;\r\n        left: 15%;\r\n        top: 20%;\r\n        width: 300px;\r\n    }\r\n\r\n    .block {\r\n        width: 100%;\r\n        margin: 0 auto;\r\n    }\r\n\r\n    .row {\r\n        height: 50px;\r\n        width: 100%;\r\n        margin: auto;\r\n    }\r\n\r\n    .row * {\r\n        margin: auto;\r\n        font-size: 15px;\r\n    }\r\n\r\n    .title {\r\n        margin: auto 10px;\r\n    }\r\n</style>"]}]}