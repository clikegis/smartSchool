{"remainingRequest":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\src\\components\\SpatialAnalysis\\SpatialAnalysisDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\src\\components\\SpatialAnalysis\\SpatialAnalysisDialog.vue","mtime":1656476912657},{"path":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\20606\\Desktop\\课程\\三维GIS原理与应用\\smartSchool\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IENlc2l1bSA9IHJlcXVpcmUoIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0Nlc2l1bS5qcyIpOwoKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JwppbXBvcnQgU3BhdGlhbEFuYWx5c2lzIGZyb20gJy4uLy4uL3V0aWxzL3NwYXRpYWxBbmFseXNpcycKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIlNwYXRpYWxBbmFseXNpc0RpYWxvZyIsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGJ1ZmZlcjogewogICAgICAgICAgICAgICAgcmFkaXVzOiAxMCwKICAgICAgICAgICAgICAgIG9wdGlvbjogMAogICAgICAgICAgICB9LAogICAgICAgICAgICB2aXNpYmlsaXR5OiB7CiAgICAgICAgICAgICAgICBlbnRpdHk6IG51bGwsCiAgICAgICAgICAgICAgICBmbGFnOiBmYWxzZSwKICAgICAgICAgICAgICAgIGZpZWxkOiBudWxsLAogICAgICAgICAgICAgICAgZm9ybTogewogICAgICAgICAgICAgICAgICAgIHZpZXdIZWFkaW5nOiAwLAogICAgICAgICAgICAgICAgICAgIHZpZXdEaXN0YW5jZTogMCwKICAgICAgICAgICAgICAgICAgICBob3Jpem9udGFsVmlld0FuZ2xlOiAwLAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsVmlld0FuZ2xlOiAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxpbWl0SGVpZ2h0OiB7CiAgICAgICAgICAgICAgICBlbnRpdHk6IG51bGwsCiAgICAgICAgICAgICAgICBmbGFnOiBmYWxzZSwKICAgICAgICAgICAgICAgIGxpbWl0OiA2MCwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2lnaHQ6IHsKICAgICAgICAgICAgICAgIHNpbmdsZUxpbmU6IG51bGwsCiAgICAgICAgICAgICAgICBjaXJjbGU6IG51bGwsCiAgICAgICAgICAgICAgICBvcHRpb246IDAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGlnVGVycmFpbjogewogICAgICAgICAgICAgICAgZW50aXR5OiBudWxsLAogICAgICAgICAgICAgICAgZmxhZzogZmFsc2UsCiAgICAgICAgICAgICAgICBkZXB0aDogMjAwCiAgICAgICAgICAgIH0KCgogICAgICAgIH07CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICAndmlzaWJpbGl0eS5mb3JtJzogewogICAgICAgICAgICBkZWVwOiB0cnVlLAogICAgICAgICAgICBoYW5kbGVyKCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMudmlzaWJpbGl0eS5maWVsZCAhPT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2liaWxpdHkuZmllbGQudXBkYXRlU3R5bGUodGhpcy52aXNpYmlsaXR5LmZvcm0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAnbGltaXRIZWlnaHQubGltaXQnOiB7CiAgICAgICAgICAgIGRlZXA6IHRydWUsCiAgICAgICAgICAgIGhhbmRsZXIoKSB7CiAgICAgICAgICAgICAgICBpZih0aGlzLmxpbWl0SGVpZ2h0LmVudGl0eSAhPT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbWl0SGVpZ2h0LmVudGl0eS5zZXRIZWlnaHQoTnVtYmVyKHRoaXMubGltaXRIZWlnaHQubGltaXQpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICAuLi5tYXBTdGF0ZShbJ3ZpZXdlcicsICdoYW5kbGVyJywgJ29wdGlvbnMnXSkKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgZ2V0UG9zaXRpb25zKG1vdmVtZW50KSB7CiAgICAgICAgICAgIGxldCBDYXJ0ZXNpYW4zID0gdGhpcy52aWV3ZXIuY2FtZXJhLnBpY2tFbGxpcHNvaWQobW92ZW1lbnQuZW5kUG9zaXRpb24gfHwgbW92ZW1lbnQucG9zaXRpb24sIENlc2l1bS5FbGxpcHNvaWQuV0dTODQpOwogICAgICAgICAgICBpZiAoQ2FydGVzaWFuMyA9PSB1bmRlZmluZWQpIHJldHVybgogICAgICAgICAgICB0aGlzLnggPSBOdW1iZXIoQ2FydGVzaWFuMy54KS50b0ZpeGVkKDIpOwogICAgICAgICAgICB0aGlzLnkgPSBOdW1iZXIoQ2FydGVzaWFuMy55KS50b0ZpeGVkKDIpOwogICAgICAgICAgICB0aGlzLnogPSBOdW1iZXIoQ2FydGVzaWFuMy56KS50b0ZpeGVkKDIpOwogICAgICAgICAgICBsZXQgQ2FydG9ncmFwaGljID0gQ2VzaXVtLkNhcnRvZ3JhcGhpYy5mcm9tQ2FydGVzaWFuKENhcnRlc2lhbjMpOwogICAgICAgICAgICB0aGlzLmxvbiA9IENlc2l1bS5NYXRoLnRvRGVncmVlcyhDYXJ0b2dyYXBoaWMubG9uZ2l0dWRlKTsKICAgICAgICAgICAgdGhpcy5sYXQgPSBDZXNpdW0uTWF0aC50b0RlZ3JlZXMoQ2FydG9ncmFwaGljLmxhdGl0dWRlKTsKICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBDYXJ0b2dyYXBoaWMuaGVpZ2h0OwogICAgICAgICAgICByZXR1cm4gW0Nlc2l1bS5NYXRoLnRvRGVncmVlcyhDYXJ0b2dyYXBoaWMubG9uZ2l0dWRlKSwgQ2VzaXVtLk1hdGgudG9EZWdyZWVzKENhcnRvZ3JhcGhpYy5sYXRpdHVkZSldOwogICAgICAgIH0sCiAgICAgICAgYWRkQnVmZmVyKGJ1ZmZlcikgewogICAgICAgICAgICB0aGlzLnZpZXdlci5lbnRpdGllcy5hZGQoewogICAgICAgICAgICAgICAgcG9seWdvbjogewogICAgICAgICAgICAgICAgICAgIGhpZXJhcmNoeTogbmV3IENlc2l1bS5Qb2x5Z29uSGllcmFyY2h5KGJ1ZmZlciksCiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWw6IENlc2l1bS5Db2xvci5SRUQud2l0aEFscGhhKDAuNiksCiAgICAgICAgICAgICAgICAgICAgY2xhc3NpZmljYXRpb25UeXBlOiBDZXNpdW0uQ2xhc3NpZmljYXRpb25UeXBlLkJPVEgKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwb2x5bGluZTogewogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uczogYnVmZmVyLAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyLAogICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBDZXNpdW0uQ29sb3IuUkVELndpdGhBbHBoYSgwLjQpLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHNldEJ1ZmZlcigpIHsKICAgICAgICAgICAgaWYgKHRoaXMuYnVmZmVyLm9wdGlvbiA9PT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy52aWV3ZXIuZW50aXRpZXMucmVtb3ZlQWxsKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5idWZmZXIub3B0aW9uID09PSAxKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oY2xpY2tFdmVudCA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyLnJlbW92ZUlucHV0QWN0aW9uKENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0NMSUNLKTsKICAgICAgICAgICAgICAgICAgICBsZXQgcG9pbnQgPSB0aGlzLmdldFBvc2l0aW9ucyhjbGlja0V2ZW50KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdlci5lbnRpdGllcy5hZGQoewogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXMocG9pbnRbMF0sIHBvaW50WzFdLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpeGVsU2l6ZTogMywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBDZXNpdW0uQ29sb3IuWUVMTE9XLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0bGluZVdpZHRoOiAzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0bGluZUNvbG9yOiBDZXNpdW0uQ29sb3IuWUVMTE9XLndpdGhBbHBoYSgwLjQpLAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRCdWZmZXIoU3BhdGlhbEFuYWx5c2lzLkJ1ZmZlckFuYWx5c2lzLnBvaW50QnVmZmVyKHBvaW50LCB0aGlzLmJ1ZmZlci5yYWRpdXMpKTsKICAgICAgICAgICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0NMSUNLKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5idWZmZXIub3B0aW9uID09PSAyKSB7CiAgICAgICAgICAgICAgICBsZXQgcG9pbnRzID0gW107CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oY2xpY2tFdmVudCA9PiB7CiAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnB1c2godGhpcy5nZXRQb3NpdGlvbnMoY2xpY2tFdmVudCkpCiAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwb3NpdGlvbnMgPSBbLi4ucG9pbnRzW3BvaW50cy5sZW5ndGggLSAyXSwgLi4ucG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXV07CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlld2VyLmVudGl0aWVzLmFkZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2x5bGluZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uczogQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXNBcnJheShwb3NpdGlvbnMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBDZXNpdW0uQ29sb3IuWUVMTE9XLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0NMSUNLKTsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlci5zZXRJbnB1dEFjdGlvbihjbGlja0V2ZW50ID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXIucmVtb3ZlSW5wdXRBY3Rpb24oQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLkxFRlRfQ0xJQ0spOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlci5yZW1vdmVJbnB1dEFjdGlvbihDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuUklHSFRfQ0xJQ0spOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQnVmZmVyKFNwYXRpYWxBbmFseXNpcy5CdWZmZXJBbmFseXNpcy5wb2x5bGluZUJ1ZmZlcihwb2ludHMsIHRoaXMuYnVmZmVyLnJhZGl1cykpOwogICAgICAgICAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLlJJR0hUX0NMSUNLKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5idWZmZXIub3B0aW9uID09PSAzKSB7CiAgICAgICAgICAgICAgICBsZXQgcG9pbnRzID0gW107CiAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb25zID0gW10KICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlci5zZXRJbnB1dEFjdGlvbihjbGlja0V2ZW50ID0+IHsKCiAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnB1c2godGhpcy5nZXRQb3NpdGlvbnMoY2xpY2tFdmVudCkpCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25zID0gWy4uLnBvc2l0aW9ucywgLi4udGhpcy5nZXRQb3NpdGlvbnMoY2xpY2tFdmVudCldOwogICAgICAgICAgICAgICAgICAgIGlmIChwb2ludHMubGVuZ3RoID4gMSAmJiBwb2ludHMubGVuZ3RoIDwgMykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdlci5lbnRpdGllcy5hZGQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdhcmVhX2xpbmUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9seWxpbmU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnM6IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkocG9zaXRpb25zKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbDogQ2VzaXVtLkNvbG9yLllFTExPVywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBvaW50cy5sZW5ndGggPj0gMykgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXJlYXMgPSBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFsuLi5wb3NpdGlvbnMsIHBvc2l0aW9uc1swXSwgcG9zaXRpb25zWzFdXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlld2VyLmVudGl0aWVzLnJlbW92ZUJ5SWQoJ2FyZWEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3ZXIuZW50aXRpZXMuYWRkKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnYXJlYScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2x5Z29uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGllcmFyY2h5OiBuZXcgQ2VzaXVtLlBvbHlnb25IaWVyYXJjaHkoYXJlYXMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBDZXNpdW0uQ29sb3IuWUVMTE9XLndpdGhBbHBoYSgwLjYpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzaWZpY2F0aW9uVHlwZTogQ2VzaXVtLkNsYXNzaWZpY2F0aW9uVHlwZS5CT1RICiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9seWxpbmU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnM6IGFyZWFzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBDZXNpdW0uQ29sb3IuWUVMTE9XLndpdGhBbHBoYSgwLjQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3ZXIuZW50aXRpZXMucmVtb3ZlQnlJZCgnYXJlYV9saW5lJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgQ2VzaXVtLlNjcmVlblNwYWNlRXZlbnRUeXBlLkxFRlRfQ0xJQ0spOwogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyLnNldElucHV0QWN0aW9uKGNsaWNrRXZlbnQgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlci5yZW1vdmVJbnB1dEFjdGlvbihDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9DTElDSyk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyLnJlbW92ZUlucHV0QWN0aW9uKENlc2l1bS5TY3JlZW5TcGFjZUV2ZW50VHlwZS5SSUdIVF9DTElDSyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPj0gMykgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXJlYXMgPSBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFsuLi5wb3NpdGlvbnMsIHBvc2l0aW9uc1swXSwgcG9zaXRpb25zWzFdXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlld2VyLmVudGl0aWVzLnJlbW92ZUJ5SWQoJ2FyZWEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3ZXIuZW50aXRpZXMuYWRkKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWVyYXJjaHk6IG5ldyBDZXNpdW0uUG9seWdvbkhpZXJhcmNoeShhcmVhcyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWw6IENlc2l1bS5Db2xvci5ZRUxMT1cud2l0aEFscGhhKDAuNiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NpZmljYXRpb25UeXBlOiBDZXNpdW0uQ2xhc3NpZmljYXRpb25UeXBlLkJPVEgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2x5bGluZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uczogYXJlYXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWw6IENlc2l1bS5Db2xvci5ZRUxMT1cud2l0aEFscGhhKDAuNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXJlYV9wb2ludHMgPSBbLi4ucG9pbnRzLCBwb2ludHNbMF1dCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQnVmZmVyKFNwYXRpYWxBbmFseXNpcy5CdWZmZXJBbmFseXNpcy5wb2x5Z29uQnVmZmVyKGFyZWFfcG9pbnRzLCB0aGlzLmJ1ZmZlci5yYWRpdXMpKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdlci5lbnRpdGllcy5yZW1vdmVCeUlkKCdhcmVhX2xpbmUnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBDZXNpdW0uU2NyZWVuU3BhY2VFdmVudFR5cGUuUklHSFRfQ0xJQ0spOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzZXRWaXNpYmlsaXR5KCkgewogICAgICAgICAgICBpZih0aGlzLnZpc2liaWxpdHkuZmxhZykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhpcy52aXNpYmlsaXR5LmVudGl0eSA9IG5ldyBTcGF0aWFsQW5hbHlzaXMuVmlzaWJpbGl0eUFuYWx5c2lzKHRoaXMudmlld2VyKTsKICAgICAgICAgICAgICAgIHRoaXMudmlzaWJpbGl0eS5lbnRpdHkuRHJhd0VuZEV2ZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJpbGl0eS5maWVsZCA9IGV2ZW50OwogICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJpbGl0eS5mb3JtID0gZXZlbnQuZ2V0U3R5bGUoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy52aXNpYmlsaXR5LmVudGl0eS5hY3RpdmF0ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYodGhpcy52aXNpYmlsaXR5LmZpZWxkICE9PSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJpbGl0eS5maWVsZC5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2liaWxpdHkuZmllbGQgPSBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy52aXNpYmlsaXR5LmVudGl0eSA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNldExpbWl0SGVpZ2h0KCkgewogICAgICAgICAgICBpZih0aGlzLmxpbWl0SGVpZ2h0LmZsYWcpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGxldCBkZWdyZWVzQXJyYXkgPSBbCiAgICAgICAgICAgICAgICAgICAgMTE0LjYwODk4MjA4MDk2NzMyLCAzMC40NjQ2OTg0MjM0MzYyNzIsCiAgICAgICAgICAgICAgICAgICAgMTE0LjYxMjk4MjA4MDk2NzMyLCAzMC40NjQ2OTg0MjM0MzYyNzIsCiAgICAgICAgICAgICAgICAgICAgMTE0LjYxMjk4MjA4MDk2NzMyLCAzMC40NjA2OTg0MjM0MzYyNzIsCiAgICAgICAgICAgICAgICAgICAgMTE0LjYwODk4MjA4MDk2NzMyLCAzMC40NjA2OTg0MjM0MzYyNzIsCiAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICAgICAgdGhpcy5saW1pdEhlaWdodC5lbnRpdHkgPSBuZXcgU3BhdGlhbEFuYWx5c2lzLkxpbWl0SGVpZ2h0QW5hbHlzaXModGhpcy52aWV3ZXIsIGRlZ3JlZXNBcnJheSwgdGhpcy5saW1pdEhlaWdodC5saW1pdCkKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRoaXMubGltaXRIZWlnaHQuZW50aXR5LnJlbW92ZSgpOwogICAgICAgICAgICAgICAgdGhpcy5saW1pdEhlaWdodC5lbnRpdHkgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzZXRTaWdodCgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuc2lnaHQub3B0aW9uID09PSAwKSB7CiAgICAgICAgICAgICAgICBpZih0aGlzLnNpZ2h0LnNpbmdsZUxpbmUgIT09IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWdodC5zaW5nbGVMaW5lLmRlYWN0aXZhdGUoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZ2h0LnNpbmdsZUxpbmUuY2xlYXIoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKHRoaXMuc2lnaHQuQ2lyY2xlICE9PSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2lnaHQuQ2lyY2xlLmRlYWN0aXZhdGUoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZ2h0LkNpcmNsZS5jbGVhcigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy52aWV3ZXIuZW50aXRpZXMucmVtb3ZlQWxsKCk7CiAgICAgICAgICAgICAgICB0aGlzLnZpZXdlci5zY2VuZS5wb3N0UHJvY2Vzc1N0YWdlcy5yZW1vdmVBbGwoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0aGlzLnNpZ2h0Lm9wdGlvbiA9PT0gMSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhpcy5zaWdodC5zaW5nbGVMaW5lID0gbmV3IFNwYXRpYWxBbmFseXNpcy5TaWdodExpbmUodGhpcy52aWV3ZXIpOwogICAgICAgICAgICAgICAgdGhpcy5zaWdodC5zaW5nbGVMaW5lLmFjdGl2YXRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodGhpcy5zaWdodC5vcHRpb24gPT09IDIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRoaXMuc2lnaHQuQ2lyY2xlID0gbmV3IFNwYXRpYWxBbmFseXNpcy5DaXJjbGUodGhpcy52aWV3ZXIpOwogICAgICAgICAgICAgICAgdGhpcy5zaWdodC5DaXJjbGUuYWN0aXZhdGUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2V0RGlnVGVycmFpbigpIHsKICAgICAgICAgICAgaWYodGhpcy5kaWdUZXJyYWluLmZsYWcpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRoaXMuZGlnVGVycmFpbi5lbnRpdHkgPSBuZXcgU3BhdGlhbEFuYWx5c2lzLkV4Y2F2YXRlKHRoaXMudmlld2VyKQogICAgICAgICAgICAgICAgdGhpcy5kaWdUZXJyYWluLmVudGl0eS5jbGVhcigpCiAgICAgICAgICAgICAgICBsZXQgZW50aXR5RHJhdyA9IG5ldyBTcGF0aWFsQW5hbHlzaXMuRW50aXR5RHJhdyh0aGlzLnZpZXdlcik7CiAgICAgICAgICAgICAgICBlbnRpdHlEcmF3LkRyYXdFbmRFdmVudC5hZGRFdmVudExpc3RlbmVyKChyZXN1bHQsIHBvc2l0aW9ucykgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZW1vdmUoKQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlnVGVycmFpbi5lbnRpdHkuYWRkKHBvc2l0aW9ucywgewogICAgICAgICAgICAgICAgICAgICAgICBleGNhdmF0ZURlcHRoOiB0aGlzLmRpZ1RlcnJhaW4uZGVwdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbUltYWdlOiAnaW1nL2V4Y2F2YXRlX2JvdHRvbV9taW4uanBnJywKICAgICAgICAgICAgICAgICAgICAgICAgc2lkZUltYWdlOiAnaW1nL2V4Y2F2YXRlX2t1YW5ncXUuanBnJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIGVudGl0eURyYXcuYWN0aXZhdGUoJ1BvbHlnb24nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRoaXMudmlld2VyLmVudGl0aWVzLnJlbW92ZUFsbCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["SpatialAnalysisDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SpatialAnalysisDialog.vue","sourceRoot":"src/components/SpatialAnalysis","sourcesContent":["<template>\r\n    <div class=\"spatialAnalysisDialog\">\r\n        <v-card class=\"block\" v-show=\"options.buffer\">\r\n            <div class=\"row\">\r\n                <v-text-field\r\n                        label=\"设置缓冲区半径（m）\"\r\n                        v-model=\"buffer.radius\"\r\n                        hide-details=\"auto\"\r\n                        class=\"title\"\r\n                >\r\n\r\n                </v-text-field>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"buffer.option=1;setBuffer()\"\r\n                >\r\n                    点\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"buffer.option=2;setBuffer()\"\r\n                >\r\n                    线\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"buffer.option=3;setBuffer()\"\r\n                >\r\n                    面\r\n                </v-btn>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"buffer.option=0;setBuffer()\"\r\n                >\r\n                    清空\r\n                </v-btn>\r\n            </div>\r\n        </v-card>\r\n        <v-card class=\"block\" v-show=\"options.visibility\">\r\n            <div class=\"row\">\r\n                <span>视域方向</span>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-slider class=\"title\" v-model=\"visibility.form.viewHeading\" :max=\"360\" :min=\"0\"></v-slider>\r\n            </div>\r\n            <div class=\"row\">\r\n                <span>水平张角</span>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-slider class=\"title\" v-model=\"visibility.form.horizontalViewAngle\" :max=\"150\" :min=\"1\"></v-slider>\r\n            </div>\r\n            <div class=\"row\">\r\n                <span>垂直张角</span>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-slider class=\"title\" v-model=\"visibility.form.verticalViewAngle\" :max=\"150\" :min=\"1\"></v-slider>\r\n            </div>\r\n            <div class=\"row\">\r\n                <span>视域距离</span>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-slider class=\"title\" v-model=\"visibility.form.viewDistance\" :max=\"1000\" :min=\"1\"></v-slider>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"visibility.flag=true;setVisibility()\"\r\n                >\r\n                    绘制\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"visibility.flag=false;setVisibility()\"\r\n                >\r\n                    清空\r\n                </v-btn>\r\n            </div>\r\n        </v-card>\r\n        <v-card class=\"block\" v-show=\"options.limitHeight\">\r\n            <div class=\"row\">\r\n                <span>限制高度</span>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-slider class=\"title\" v-model=\"limitHeight.limit\" :max=\"120\" :min=\"1\"></v-slider>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"limitHeight.flag=true;setLimitHeight()\"\r\n                >\r\n                    绘制\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"limitHeight.flag=false;setLimitHeight()\"\r\n                >\r\n                    清空\r\n                </v-btn>\r\n            </div>\r\n        </v-card>\r\n        <v-card class=\"block\" v-show=\"options.sight\">\r\n            <div class=\"row\">\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"sight.option=1;setSight()\"\r\n                >\r\n                    线形\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"sight.option=2;setSight()\"\r\n                >\r\n                    圆形\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"sight.option=0;setSight()\"\r\n                >\r\n                    清空\r\n                </v-btn>\r\n            </div>\r\n        </v-card>\r\n        <v-card class=\"block\" v-show=\"options.digTerrain\">\r\n            <div class=\"row\">\r\n                <v-text-field\r\n                        label=\"设置填挖深度（m）\"\r\n                        v-model=\"digTerrain.depth\"\r\n                        hide-details=\"auto\"\r\n                        class=\"title\"\r\n                >\r\n\r\n                </v-text-field>\r\n            </div>\r\n            <div class=\"row\">\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"digTerrain.flag=true;setDigTerrain()\"\r\n                >\r\n                    绘制\r\n                </v-btn>\r\n                <v-btn\r\n                        color=\"primary\"\r\n                        elevation=\"2\"\r\n                        @click=\"digTerrain.flag=false;setDigTerrain()\"\r\n                >\r\n                    清空\r\n                </v-btn>\r\n            </div>\r\n        </v-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    const Cesium = require(\"../../../node_modules/cesium/Source/Cesium.js\");\r\n\r\n    import { mapState } from 'vuex'\r\n    import SpatialAnalysis from '../../utils/spatialAnalysis'\r\n    export default {\r\n        name: \"SpatialAnalysisDialog\",\r\n        data() {\r\n            return {\r\n                buffer: {\r\n                    radius: 10,\r\n                    option: 0\r\n                },\r\n                visibility: {\r\n                    entity: null,\r\n                    flag: false,\r\n                    field: null,\r\n                    form: {\r\n                        viewHeading: 0,\r\n                        viewDistance: 0,\r\n                        horizontalViewAngle: 0,\r\n                        verticalViewAngle: 0\r\n                    }\r\n                },\r\n                limitHeight: {\r\n                    entity: null,\r\n                    flag: false,\r\n                    limit: 60,\r\n                },\r\n                sight: {\r\n                    singleLine: null,\r\n                    circle: null,\r\n                    option: 0\r\n                },\r\n                digTerrain: {\r\n                    entity: null,\r\n                    flag: false,\r\n                    depth: 200\r\n                }\r\n\r\n\r\n            };\r\n        },\r\n        watch: {\r\n            'visibility.form': {\r\n                deep: true,\r\n                handler() {\r\n                    if (this.visibility.field !== null)\r\n                    {\r\n                        this.visibility.field.updateStyle(this.visibility.form);\r\n                    }\r\n                }\r\n            },\r\n            'limitHeight.limit': {\r\n                deep: true,\r\n                handler() {\r\n                    if(this.limitHeight.entity !== null)\r\n                    {\r\n                        this.limitHeight.entity.setHeight(Number(this.limitHeight.limit));\r\n                    }\r\n                }\r\n            },\r\n        },\r\n        computed: {\r\n            ...mapState(['viewer', 'handler', 'options'])\r\n        },\r\n        methods: {\r\n            getPositions(movement) {\r\n                let Cartesian3 = this.viewer.camera.pickEllipsoid(movement.endPosition || movement.position, Cesium.Ellipsoid.WGS84);\r\n                if (Cartesian3 == undefined) return\r\n                this.x = Number(Cartesian3.x).toFixed(2);\r\n                this.y = Number(Cartesian3.y).toFixed(2);\r\n                this.z = Number(Cartesian3.z).toFixed(2);\r\n                let Cartographic = Cesium.Cartographic.fromCartesian(Cartesian3);\r\n                this.lon = Cesium.Math.toDegrees(Cartographic.longitude);\r\n                this.lat = Cesium.Math.toDegrees(Cartographic.latitude);\r\n                this.height = Cartographic.height;\r\n                return [Cesium.Math.toDegrees(Cartographic.longitude), Cesium.Math.toDegrees(Cartographic.latitude)];\r\n            },\r\n            addBuffer(buffer) {\r\n                this.viewer.entities.add({\r\n                    polygon: {\r\n                        hierarchy: new Cesium.PolygonHierarchy(buffer),\r\n                        material: Cesium.Color.RED.withAlpha(0.6),\r\n                        classificationType: Cesium.ClassificationType.BOTH\r\n                    },\r\n                    polyline: {\r\n                        positions: buffer,\r\n                        width: 2,\r\n                        material: Cesium.Color.RED.withAlpha(0.4),\r\n                    }\r\n                });\r\n            },\r\n            setBuffer() {\r\n                if (this.buffer.option === 0) {\r\n                    this.viewer.entities.removeAll()\r\n                }\r\n                if (this.buffer.option === 1) {\r\n                    this.handler.setInputAction(clickEvent => {\r\n                        this.handler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n                        let point = this.getPositions(clickEvent);\r\n                        this.viewer.entities.add({\r\n                            position: Cesium.Cartesian3.fromDegrees(point[0], point[1], 0),\r\n                            point: {\r\n                                pixelSize: 3,\r\n                                color: Cesium.Color.YELLOW,\r\n                                outlineWidth: 3,\r\n                                outlineColor: Cesium.Color.YELLOW.withAlpha(0.4),\r\n                            }\r\n                        });\r\n                        this.addBuffer(SpatialAnalysis.BufferAnalysis.pointBuffer(point, this.buffer.radius));\r\n                    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n                }\r\n                if (this.buffer.option === 2) {\r\n                    let points = [];\r\n                    this.handler.setInputAction(clickEvent => {\r\n                        points.push(this.getPositions(clickEvent))\r\n                        if (points.length > 1) {\r\n                            let positions = [...points[points.length - 2], ...points[points.length - 1]];\r\n                            this.viewer.entities.add({\r\n                                polyline: {\r\n                                    positions: Cesium.Cartesian3.fromDegreesArray(positions),\r\n                                    width: 2,\r\n                                    material: Cesium.Color.YELLOW,\r\n                                }\r\n                            })\r\n                        }\r\n                    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n                    this.handler.setInputAction(clickEvent => {\r\n                        this.handler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n                        this.handler.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK);\r\n                        this.addBuffer(SpatialAnalysis.BufferAnalysis.polylineBuffer(points, this.buffer.radius));\r\n                    }, Cesium.ScreenSpaceEventType.RIGHT_CLICK);\r\n                }\r\n                if (this.buffer.option === 3) {\r\n                    let points = [];\r\n                    let positions = []\r\n                    this.handler.setInputAction(clickEvent => {\r\n\r\n                        points.push(this.getPositions(clickEvent))\r\n                        positions = [...positions, ...this.getPositions(clickEvent)];\r\n                        if (points.length > 1 && points.length < 3) {\r\n                            this.viewer.entities.add({\r\n                                id: 'area_line',\r\n                                polyline: {\r\n                                    positions: Cesium.Cartesian3.fromDegreesArray(positions),\r\n                                    width: 2,\r\n                                    material: Cesium.Color.YELLOW,\r\n                                }\r\n                            })\r\n                        } else if (points.length >= 3) {\r\n                            let areas = Cesium.Cartesian3.fromDegreesArray([...positions, positions[0], positions[1]]);\r\n                            this.viewer.entities.removeById('area');\r\n                            this.viewer.entities.add({\r\n                                id: 'area',\r\n                                polygon: {\r\n                                    hierarchy: new Cesium.PolygonHierarchy(areas),\r\n                                    material: Cesium.Color.YELLOW.withAlpha(0.6),\r\n                                    classificationType: Cesium.ClassificationType.BOTH\r\n                                },\r\n                                polyline: {\r\n                                    positions: areas,\r\n                                    width: 2,\r\n                                    material: Cesium.Color.YELLOW.withAlpha(0.4),\r\n                                }\r\n                            });\r\n                            this.viewer.entities.removeById('area_line');\r\n                        }\r\n                    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n                    this.handler.setInputAction(clickEvent => {\r\n                        this.handler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n                        this.handler.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK);\r\n                        if (points.length >= 3) {\r\n                            let areas = Cesium.Cartesian3.fromDegreesArray([...positions, positions[0], positions[1]]);\r\n                            this.viewer.entities.removeById('area');\r\n                            this.viewer.entities.add({\r\n                                polygon: {\r\n                                    hierarchy: new Cesium.PolygonHierarchy(areas),\r\n                                    material: Cesium.Color.YELLOW.withAlpha(0.6),\r\n                                    classificationType: Cesium.ClassificationType.BOTH\r\n                                },\r\n                                polyline: {\r\n                                    positions: areas,\r\n                                    width: 2,\r\n                                    material: Cesium.Color.YELLOW.withAlpha(0.4),\r\n                                }\r\n                            });\r\n                            let area_points = [...points, points[0]]\r\n                            this.addBuffer(SpatialAnalysis.BufferAnalysis.polygonBuffer(area_points, this.buffer.radius));\r\n                        } else {\r\n                            this.viewer.entities.removeById('area_line');\r\n                        }\r\n                    }, Cesium.ScreenSpaceEventType.RIGHT_CLICK);\r\n                }\r\n            },\r\n            setVisibility() {\r\n                if(this.visibility.flag)\r\n                {\r\n                    this.visibility.entity = new SpatialAnalysis.VisibilityAnalysis(this.viewer);\r\n                    this.visibility.entity.DrawEndEvent.addEventListener(event => {\r\n                        this.visibility.field = event;\r\n                        this.visibility.form = event.getStyle();\r\n                    });\r\n                    this.visibility.entity.activate();\r\n                }\r\n                else\r\n                {\r\n                    if(this.visibility.field !== null)\r\n                    {\r\n                        this.visibility.field.remove();\r\n                        this.visibility.field = null;\r\n                    }\r\n                    this.visibility.entity = null;\r\n                }\r\n            },\r\n            setLimitHeight() {\r\n                if(this.limitHeight.flag)\r\n                {\r\n                    let degreesArray = [\r\n                        114.60898208096732, 30.464698423436272,\r\n                        114.61298208096732, 30.464698423436272,\r\n                        114.61298208096732, 30.460698423436272,\r\n                        114.60898208096732, 30.460698423436272,\r\n                    ];\r\n                    this.limitHeight.entity = new SpatialAnalysis.LimitHeightAnalysis(this.viewer, degreesArray, this.limitHeight.limit)\r\n                }\r\n                else\r\n                {\r\n                    this.limitHeight.entity.remove();\r\n                    this.limitHeight.entity = null;\r\n                }\r\n            },\r\n            setSight() {\r\n                if (this.sight.option === 0) {\r\n                    if(this.sight.singleLine !== null)\r\n                    {\r\n                        this.sight.singleLine.deactivate();\r\n                        this.sight.singleLine.clear();\r\n                    }\r\n                    if(this.sight.Circle !== null)\r\n                    {\r\n                        this.sight.Circle.deactivate();\r\n                        this.sight.Circle.clear();\r\n                    }\r\n                    this.viewer.entities.removeAll();\r\n                    this.viewer.scene.postProcessStages.removeAll();\r\n                }\r\n                if(this.sight.option === 1)\r\n                {\r\n                    this.sight.singleLine = new SpatialAnalysis.SightLine(this.viewer);\r\n                    this.sight.singleLine.activate();\r\n                }\r\n                if(this.sight.option === 2)\r\n                {\r\n                    this.sight.Circle = new SpatialAnalysis.Circle(this.viewer);\r\n                    this.sight.Circle.activate();\r\n                }\r\n            },\r\n            setDigTerrain() {\r\n                if(this.digTerrain.flag)\r\n                {\r\n                    this.digTerrain.entity = new SpatialAnalysis.Excavate(this.viewer)\r\n                    this.digTerrain.entity.clear()\r\n                    let entityDraw = new SpatialAnalysis.EntityDraw(this.viewer);\r\n                    entityDraw.DrawEndEvent.addEventListener((result, positions) => {\r\n                        result.remove()\r\n                        this.digTerrain.entity.add(positions, {\r\n                            excavateDepth: this.digTerrain.depth,\r\n                            bottomImage: 'img/excavate_bottom_min.jpg',\r\n                            sideImage: 'img/excavate_kuangqu.jpg'\r\n                        });\r\n                    })\r\n                    entityDraw.activate('Polygon');\r\n                }\r\n                else\r\n                {\r\n                    this.viewer.entities.removeAll();\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .spatialAnalysisDialog {\r\n        position: absolute;\r\n        left: 15%;\r\n        top: 20%;\r\n        width: 300px;\r\n    }\r\n\r\n    .block {\r\n        width: 100%;\r\n        margin: 0 auto;\r\n    }\r\n\r\n    .row {\r\n        height: 50px;\r\n        width: 100%;\r\n        margin: auto;\r\n    }\r\n\r\n    .row * {\r\n        margin: auto;\r\n        font-size: 15px;\r\n    }\r\n\r\n    .title {\r\n        margin: auto 10px;\r\n    }\r\n</style>"]}]}